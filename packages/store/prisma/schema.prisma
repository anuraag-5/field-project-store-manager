generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum UPI_METHODS {
  GPAY
  PHONEPE
  PAYtm
}

enum Payment_Methods {
  UPI
  CASH
}

model employees {
  id                  String                 @id               @default(uuid())
  email               String                 @unique
  password            String
  name                String
  contact             String
  address             String
  isOwner             Boolean
  stores              stores[]
}

model customers {
  id                  String                 @id               @default(uuid())
  name                String
  contact             String
  address             String?
  sales               sales[]
  stores              customer_stores[]
}

model products {
  id                  String                 @id               @default(uuid())
  brandModel          String
  name                String
  price               Int
  quantity            Int
  prod_sales          product_sales[]
}

model sales {
  id                  String                 @id               @default(uuid())
  quantity            Json
  totalAmount         BigInt
  saleDate            DateTime               @default(now())
  paymentMethod       Payment_Methods
  customerId          String
  customer            customers              @relation(fields: [customerId], references: [id])
  prod_sales          product_sales[]
}

model product_sales {
  id                  String                 @id               @default(uuid())
  product_id          String
  sales_id            String
  store_id            String
  totalPrice          Int
  store               stores                 @relation(fields: [store_id], references: [id])
  product             products               @relation(fields: [product_id], references: [id])
  sale                sales                  @relation(fields: [sales_id], references: [id])
}

model stores {
  id                  String                 @id               @default(uuid())
  name                String
  email               String                 @unique
  address             String
  city                String
  state               String
  gstin               String
  contact             String
  isVerified          Boolean                                  @default(false)
  otp                 Json?
  owner_id            String
  customers           customer_stores[]
  prod_sales          product_sales[]
  Owner               employees               @relation(fields: [owner_id], references: [id])
}

model customer_stores {
  id                  String                 @id               @default(uuid())
  customer_id         String
  store_id            String
  customer            customers               @relation(fields: [customer_id], references: [id])
  store               stores                  @relation(fields: [store_id], references: [id])
}